###  1 Подход HTTP  - взаимодействие

A lot of a get query )
Информация  о  пользоватле  хранится в JWT токене.

![http взаимодействие](event_http.png)

Минусы данного  подхода:

1. Регистрация   данного  пользователя,  сильно  нагружена. Перед  тем как отправтиь  response,  приходится  ждать пока  пользователь добавится в  сервис  биллинга, а затем, сервис нотификаций  отправим  уведомление на email. ( увеличивает  время  ответа  клиенту на  запрос регистрации пользователя). Действия все синхронные. Здесь прям  само  напрашивается, вынести  действия, добавление пользователя в  серис билллинга и отправку  уведомлений, асинхронно.

2. При  хранении  информации,   о пользователе в JWT,  из  которого сервис биллинга  считывает, для  создания  пользователя   в своем  сервисе,  возникает  ситуация -  синхронизации 
пользоватлей.

3. Покупка  товара осуществялется в сервисе  заказа, а  списание   средств  в сервисе  биллинга и здесь,  узкое место,  списать   средства и  не отправить  товар,  то есть  нужно 
следить  за тем, что бы  данные   две  операции: покупка, резервация  товара и списание   средств со счеты  были  транзакционные.

### 2 Подход Event Notifications

В payload событий передается только самые существенные данные (  идентификатор  пользователя,   индентификатор счета, товара...) 

![event notification](event_notification.png)

Минусы  данного  подхода:

1. Часть  действий ( создание пользователя,  отправка  нотификаци) ушли в асинхронность, за счет   появления  message bus, но   хождение на  за доп инфой   в сторонние  сервисы 
осталась, (лишнее   хождение по  http, не нужная  нагрузка  на  чтение  из сервиса  биллинга и    сервиса  авторизации (хранищиц  инфу о пользоватле) )
2.3. Сохраняются  из первого подхода

### 3 Подхо EventCollaboration

![event_collaboration](event_collaboration.png)

